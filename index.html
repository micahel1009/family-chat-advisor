<!DOCTYPE html>
<html lang="zh-TW" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Re:Family - 溫暖家庭溝通平台</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/preline@2.3.0/dist/preline.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'noto': ['Noto Sans TC', 'sans-serif']
                    },
                    colors: {
                        'warm-orange': '#FF8A65',
                        'warm-peach': '#FFAB91',
                        'soft-coral': '#FFCCBC',
                        'gentle-pink': '#F8BBD9',
                        'calm-blue': '#81C784',
                        'serene-green': '#A5D6A7'
                    }
                }
            }
        }
    </script>
    
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script> 
    
    <script>
        // ⚠️ 請替換成您從 Firebase 複製的實際配置！
        const firebaseConfig = {
            apiKey: "AIzaSyA6C0ArowfDaxJKV15anQZSZT7bcdeXJ2E", // 您的 apiKey
            authDomain: "familychatadvisor.firebaseapp.com",
            projectId: "familychatadvisor",
            storageBucket: "familychatadvisor.appspot.com",
            messagingSenderId: "172272099421",
            appId: "1:172272099421:web:a67b69291419194189edb4"
        };

        try {
            const app = firebase.initializeApp(firebaseConfig);
            const db = firebase.firestore(); 
        } catch (e) {
            console.error("Firebase 初始化失敗。", e);
        }
    </script>
    <style>
        .chat-container-card { height: 500px; position: relative; overflow: hidden; }
        .chat-messages-area {
            position: absolute; top: 64px; left: 0; right: 0; 
            bottom: 80px; /* 為輸入框留出空間 */
            overflow-y: auto;
            padding: 24px;
        }
        .chat-input-fixed {
            position: absolute; bottom: 0; left: 0; right: 0; 
            z-index: 40; 
            padding: 16px;
        }
        * { scrollbar-width: thin !important; scrollbar-color: #bfc5ce transparent !important;}
        *::-webkit-scrollbar { width: 6px !important;}
        *::-webkit-scrollbar-thumb { background-color: #bfc5ce !important; border-radius: 9999px !important;}
        *::-webkit-scrollbar-track { background-color: transparent !important; border-radius: 9999px !important;}
        
        /* 房間加入介面樣式 */
        #roomEntryScreen { 
            position: absolute; 
            top: 0; 
            bottom: 0; 
            left: 0; 
            right: 0; 
            background: rgba(255, 255, 255, 0.98); 
            z-index: 50;
            display: none; /* 預設隱藏，由 JS 控制顯示 */
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
    </style>
</head>
<body class="font-noto bg-gradient-to-br from-orange-50 via-pink-50 to-amber-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 text-gray-800 dark:text-gray-200 transition-all duration-300" style="cursor: default;">
    
    <nav class="fixed top-0 left-0 right-0 z-50 bg-white/90 dark:bg-gray-900/90 backdrop-blur-md border-b border-orange-100 dark:border-gray-700">        
        <div class="max-w-7xl mx-auto px-6 lg:px-8">            
            <div class="flex items-center justify-between h-16">                
                <div class="flex items-center space-x-2">                    
                    <i class="fas fa-heart text-2xl text-warm-orange"></i>                    
                    <span class="text-xl font-semibold bg-gradient-to-r from-warm-orange to-gentle-pink bg-clip-text text-transparent">Re:Family</span>                
                </div>                                
                <div class="hidden md:flex items-center space-x-8">                    
                    <a href="#home" class="text-gray-700 dark:text-gray-300 hover:text-warm-orange transition-colors">首頁</a>                    
                    <a href="#chat" class="text-gray-700 dark:text-gray-300 hover:text-warm-orange transition-colors">智能對話</a>                    
                    <a href="#features" class="text-gray-700 dark:text-gray-300 hover:text-warm-orange transition-colors">功能特色</a>                    
                    <a href="#communication" class="text-gray-700 dark:text-gray-300 hover:text-warm-orange transition-colors">溝通技巧</a>
                    
                    <button id="leaveRoomButton" class="px-3 py-1 text-sm bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors hidden">
                        切換房間
                    </button>
                    <span id="current-user-status" class="text-sm">未加入</span> 
                </div>

                <button id="theme-toggle" class="p-2 rounded-lg bg-orange-100 dark:bg-gray-800 text-warm-orange dark:text-orange-300 hover:bg-orange-200 dark:hover:bg-gray-700 transition-colors">                    
                    <i class="fas fa-sun dark:hidden"></i>                    
                    <i class="fas fa-moon hidden dark:inline"></i>                
                </button>            
            </div>        
        </div>    
    </nav>

    <section id="home" class="relative min-h-screen flex items-center overflow-hidden" style="opacity: 1; transform: translateY(0px); transition: opacity 0.6s, transform 0.6s;">        
        <div class="absolute inset-0 bg-gradient-to-br from-warm-orange/10 via-gentle-pink/10 to-soft-coral/10"></div>                
        <div class="relative max-w-7xl mx-auto px-6 lg:px-8 py-20 grid lg:grid-cols-2 gap-12 items-center">            
            <div class="space-y-8 lg:space-y-12">                
                <div class="space-y-6">                    
                    <h1 class="text-5xl lg:text-7xl font-bold leading-tight">                        
                        <span class="bg-gradient-to-r from-warm-orange via-gentle-pink to-warm-peach bg-clip-text text-transparent">溫暖家庭</span><br>                        
                        <span class="text-gray-800 dark:text-gray-200">溝通橋樑</span>                    
                    </h1>                    
                    <p class="text-xl lg:text-2xl text-gray-600 dark:text-gray-400 leading-relaxed">                        
                        專為家庭溝通設計的溫暖平台，用溫柔對話技巧，讓每一次交流都充滿理解與關愛，就像一位真正在乎您的朋友。
                    </p>                
                </div>                                
                
                <div class="flex items-center space-x-8 text-sm text-gray-500 dark:text-gray-400">                    
                    <div class="flex items-center space-x-2">                        
                        <i class="fas fa-comment-dots text-warm-orange"></i>
                        <span id="initialRoomStatusText">匿名模式，請點擊下方聊天室開始！</span>                   
                    </div>                    
                    <div class="flex items-center space-x-2">                        
                        <i class="fas fa-clock text-warm-orange"></i>                        
                        <span>24小時陪伴</span>                    
                    </div>                
                </div>            
            </div>
            
            <div class="relative">                
                <div class="relative z-10">                    
                    <img src="./440186.jpg" alt="Re:Family 溝通調解概念圖" class="rounded-3xl shadow-2xl">                
                </div>                                
                <div class="absolute -top-6 -right-6 w-24 h-24 bg-gradient-to-br from-warm-orange to-gentle-pink rounded-full opacity-70 animate-pulse"></div>                
                <div class="absolute -bottom-8 -left-8 w-32 h-32 bg-gradient-to-br from-soft-coral to-warm-peach rounded-full opacity-50 animate-pulse animation-delay-1000"></div>            
            </div>        
        </div>
        
        <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">            
            <i class="fas fa-chevron-down text-warm-orange text-2xl"></i>        
        </div>    
    </section>

    <section id="chat" class="py-20" style="opacity: 1; transform: translateY(0px); transition: opacity 0.6s, transform 0.6s;">        
        <div class="max-w-7xl mx-auto px-6 lg:px-8">            
            <div class="text-center mb-16">                
                <h2 class="text-4xl lg:text-5xl font-bold mb-6">                    
                    <span class="bg-gradient-to-r from-warm-orange to-gentle-pink bg-clip-text text-transparent">智能對話體驗 (群聊調解室)</span>                
                </h2>                
                <p class="text-xl text-gray-600 dark:text-gray-400 max-w-3xl mx-auto">                    
                    Re:Family 智能助手在旁協調，促進家庭成員間的即時溝通。
                </p>            
            </div>
            
            <div class="max-w-4xl mx-auto">
                <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl chat-container-card" id="chat-widget-container">
                    <div class="bg-gradient-to-r from-warm-orange to-warm-peach p-4 h-16 flex items-center">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
                                <i class="fas fa-heart text-white"></i>
                            </div>
                            <div>
                                <h3 class="text-white font-semibold">Re:Family 智能助手</h3>
                                <p class="text-white/80 text-sm">正在線上・隨時為您服務</p>
                            </div>
                        </div>
                    </div>

                    <div id="chatArea" class="chat-messages-area space-y-4">
                        
                        <div id="loadingIndicator" class="loading-indicator text-center text-sm text-gray-500 dark:text-gray-400 p-2 hidden">
                            AI 顧問正在思考中...
                        </div>
                        
                    </div>

                    <div id="roomEntryScreen" class="bg-white dark:bg-gray-800 rounded-b-3xl">
                        <div class="max-w-xs mx-auto p-8">
                            <h4 class="font-bold text-xl mb-4 text-warm-orange">
                                🏠 加入家庭調解室
                            </h4>
                            <p class="text-sm text-gray-600 mb-6">
                                請輸入您家庭專屬的代碼與您的暱稱，確保溝通只在家人之間。
                            </p>
                            <input type="text" id="roomIdInput" placeholder="家庭房間代碼 (例如: FamilyA123)" class="w-full p-3 mb-3 border rounded-lg focus:ring-warm-orange">
                            <input type="text" id="userNameInput" placeholder="您的暱稱 (例如: 爸爸/小美)" class="w-full p-3 mb-4 border rounded-lg focus:ring-warm-orange">
                            <button id="startChatButton" class="w-full px-4 py-3 bg-calm-blue text-white font-bold rounded-lg hover:bg-serene-green transition-colors">
                                開始群聊
                            </button>
                        </div>
                    </div>
                    
                    <div class="chat-input-fixed bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-600 shadow-t">
                        <div class="max-w-4xl mx-auto"> 
                            <div class="flex items-end space-x-3">
                                <input type="text" id="userInput" placeholder="請先加入房間才能開始對話..." class="flex-grow p-3 md:p-4 border border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-warm-orange focus:border-transparent outline-none text-base" disabled>
                                
                                <button id="sendButton" class="w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-warm-orange to-warm-peach rounded-full flex items-center justify-center text-white hover:scale-110 transition-transform flex-shrink-0" disabled>
                                    <i class="fas fa-paper-plane text-sm md:text-base"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="features" class="py-20 bg-white/50 dark:bg-gray-800/50" style="opacity: 1; transform: translateY(0px); transition: opacity 0.6s, transform 0.6s;">        
        <div class="max-w-7xl mx-auto px-6 lg:px-8">            
            <div class="text-center mb-16">                
                <button class="w-full text-center focus:outline-none" onclick="toggleContent(this, 'features-content')">
                    <div class="flex items-center justify-center space-x-4">
                        <h2 class="text-4xl lg:text-5xl font-bold mb-6">                    
                            <span class="bg-gradient-to-r from-warm-orange to-gentle-pink bg-clip-text text-transparent">功能特色</span>                
                        </h2>
                        <i class="fas fa-chevron-down text-warm-orange text-3xl transition-transform duration-300 transform rotate-0"></i>
                    </div>
                </button>
                <p class="text-xl text-gray-600 dark:text-gray-400 max-w-3xl mx-auto">                    
                    結合溝通技巧與AI智慧，為您的家庭提供全方位的溫暖支持                
                </p>            
            </div>
            
            <div id="features-content" class="content-toggle max-h-0 overflow-hidden transition-all duration-300">
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">                
                    <div class="group p-8 bg-gradient-to-br from-white to-orange-50/50 dark:from-gray-800 dark:to-gray-700 rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2">                    
                        <div class="w-16 h-16 bg-gradient-to-br from-warm-orange to-warm-peach rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">                        
                            <i class="fas fa-heart text-2xl text-white"></i>                    
                        </div>                    
                        <h3 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200">情感支持與傾聽</h3>                    
                        <p class="text-gray-600 dark:text-gray-400">透過溫暖的傾聽和對話，陪您梳理心情、緩解壓力，讓您感受到真實的關懷與理解。</p>                
                    </div>
                    
                    <div class="group p-8 bg-gradient-to-br from-white to-pink-50/50 dark:from-gray-800 dark:to-gray-700 rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2">                    
                        <div class="w-16 h-16 bg-gradient-to-br from-gentle-pink to-soft-coral rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">                        
                            <i class="fas fa-users text-2xl text-white"></i>                    
                        </div>                    
                        <h3 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200">溫和溝通引導</h3>                    
                        <p class="text-gray-600 dark:text-gray-400">引導您學會穩定情緒、專注聆聽、理解對方並清晰表達，讓對話更有效。</p>                
                    </div>
                    
                    <div class="group p-8 bg-gradient-to-br from-white to-amber-50/50 dark:from-gray-800 dark:to-gray-700 rounded-3xl shadow-lg hover:-shadow-xl transition-all duration-300 hover:-translate-y-2">                    
                        <div class="w-16 h-16 bg-gradient-to-br from-calm-blue to-serene-green rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">                        
                            <i class="fas fa-clock text-2xl text-white"></i>                    
                        </div>                    
                        <h3 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200">24小時即時陪伴</h3>                    
                        <p class="text-gray-600 dark:text-gray-400">無需預約，無論何時，只要您的情緒需要支持，都可以立即獲得回應與陪伴。</p>                
                    </div>
                    
                    <div class="group p-8 bg-gradient-to-br from-white to-green-50/50 dark:from-gray-800 dark:to-gray-700 rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2">                    
                        <div class="w-16 h-16 bg-gradient-to-br from-warm-orange to-gentle-pink rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">                        
                            <i class="fas fa-shield-alt text-2xl text-white"></i>                    
                        </div>                    
                        <h3 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200">隱私保護</h3>                    
                        <p class="text-gray-600 dark:text-gray-400">對話全程加密，保護您的個人分享，讓您安心訴說內心感受。</p>                
                    </div>
                    
                    <div class="group p-8 bg-gradient-to-br from-white to-blue-50/50 dark:from-gray-800 dark:to-gray-700 rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2">                    
                        <div class="w-16 h-16 bg-gradient-to-br from-gentle-pink to-warm-peach rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">                        
                            <i class="fas fa-lightbulb text-2xl text-white"></i>                    
                        </div>                    
                        <h3 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200">貼心建議</h3>                    
                        <p class="text-gray-600 dark:text-gray-400">根據您的情況，提供量身定制的溝通小技巧和情緒調整方法。</p>                
                    </div>
                    
                    <div class="group p-8 bg-gradient-to-br from-white to-purple-50/50 dark:from-gray-800 dark:to-gray-700 rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2">                    
                        <div class="w-16 h-16 bg-gradient-to-br from-calm-blue to-serene-green rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">                        
                            <i class="fas fa-brain text-2xl text-white"></i>                    
                        </div>                    
                        <h3 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200">自我理解引導</h3>                    
                        <p class="text-gray-600 dark:text-gray-400">透過對話，幫助您發現自己情緒和行為背後的原因，促進個人成長。</p>                
                    </div>            
                </div>
            </div>        
        </div>    
    </section>

    <section class="py-20 bg-gradient-to-br from-warm-orange via-warm-peach to-gentle-pink relative overflow-hidden" style="opacity: 1; transform: translateY(0px); transition: opacity 0.6s, transform 0.6s;">        
        <div class="absolute inset-0 bg-gradient-to-r from-warm-orange/20 to-gentle-pink/20"></div>                
        <div class="relative max-w-4xl mx-auto px-6 lg:px-8 text-center text-white">            
            <h2 class="text-4xl lg:text-6xl font-bold mb-6">                
                開始您的溫暖對話之旅            
            </h2>            
            <p class="text-xl lg:text-2xl mb-8 opacity-90">                
                讓 Re:Family 陪伴您與家人建立更深層的情感連結            
            </p>                        
            
        </div>    
    </section>

    <footer class="bg-gray-900 dark:bg-gray-950 text-white py-12">        
        <div class="max-w-7xl mx-auto px-6 lg:px-8">            
            <div class="flex justify-center"> <div class="space-y-4 text-center"> <div class="flex items-center justify-center space-x-2">                        
                        <i class="fas fa-heart text-2xl text-warm-orange"></i>                        
                        <span class="text-xl font-semibold">Re:Family</span>                    
                    </div>                    
                    <p class="text-gray-400">讓每個家庭都能擁有溫暖的溝通橋樑</p>                
                </div>
            </div>                        
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">                
                <p>© 2025 鄭傳耀. 保留所有權利。</p>            
            </div>        
        </div>    
    </footer>

    <script src="script.js"></script>
    
    <script>        
        // UI JS 保持不變
        const themeToggle = document.getElementById('theme-toggle');        
        const html = document.documentElement;
        
        const savedTheme = localStorage.getItem('theme');        
        const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';        
        const initialTheme = savedTheme || systemTheme;
        
        html.classList.toggle('dark', initialTheme === 'dark');
        
        themeToggle.addEventListener('click', () => {            
            const isDark = html.classList.contains('dark');            
            html.classList.toggle('dark');            
            localStorage.setItem('theme', isDark ? 'light' : 'dark');        
        });
        
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {            
            anchor.addEventListener('click', function (e) {                
                e.preventDefault();                
                const target = document.querySelector(this.getAttribute('href'));                
                if (target) {                    
                    target.scrollIntoView({                        
                        behavior: 'smooth',                        
                        block: 'start'                    
                    });                
                }            
            });        
        });
        
        function toggleContent(button, contentId) {
            const content = document.getElementById(contentId);
            const icon = button.querySelector('i');
            const isOpen = content.style.maxHeight && content.style.maxHeight !== '0px';

            if (isOpen) {
                content.style.maxHeight = '0px';
                icon.style.transform = 'rotate(0deg)';
            } else {
                content.style.maxHeight = content.scrollHeight + 'px';
                icon.style.transform = 'rotate(180deg)';
            }
        }

        function toggleFAQ(button) {            
            const content = button.nextElementSibling;            
            const icon = button.querySelector('i');            
            const isOpen = content.style.maxHeight && content.style.maxHeight !== '0px';
            
            document.querySelectorAll('.faq-content').forEach(faq => {                
                if (faq !== content) {                    
                    faq.style.maxHeight = '0px';                    
                    faq.parentElement.querySelector('i').style.transform = 'rotate(0deg)';                
                }
            });
            
            if (isOpen) {                
                content.style.maxHeight = '0px';                
                icon.style.transform = 'rotate(0deg)';            
            } else {                
                content.style.maxHeight = content.scrollHeight + 'px';                
                icon.style.transform = 'rotate(180deg)';            
            }        
        }
        
        const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -50px 0px'};
        const observer = new IntersectionObserver((entries) => {            
            entries.forEach(entry => {                
                if (entry.isIntersecting) {                    
                    entry.target.style.opacity = '1';                    
                    entry.target.style.transform = 'translateY(0)';                
                }            
            });        
        }, observerOptions);
        
        document.querySelectorAll('section').forEach(section => {            
            section.style.opacity = '0';            
            section.style.transform = 'translateY(20px)';            
            observer.observe(section);        
        });
        
        const chatContainer = document.querySelector('.chat-messages-area'); 
        if (chatContainer) {            
            chatContainer.scrollTop = chatContainer.scrollHeight;        
        }
        
        document.addEventListener('contextmenu', event => event.preventDefault()); 
        document.onkeydown = function(e) {
            if (e.keyCode === 123 || (e.ctrlKey && e.keyCode === 85)) {
                return false;
            }
        };
    </script>
</body>
</html>
